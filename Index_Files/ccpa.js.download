window.ccpa_sp={},window.ccpa_sp.ccpaPrivacyBanner='<style>textarea.form-control-drf {height: auto;}.row {box-sizing: border-box;margin-right: -10px;margin-left: -10px;}@media screen and (max-width:500px) {.col-sm-6 {width:100% !important;}}div#sp-alert-messages-drf *, {transform: translateZ(0);}#sp-alert-messages-drf{text-align: center; font-size: 14px; display: flex;height: 70px;position: absolute;top: 0px;z-index: 99999999999;width: 100%;align-items: center;justify-content: center;}#sp-alert-messages-drf span {display: inline-block;vertical-align: middle;line-height: 70px;}.error-alert{background:#eaeaea;color:red; }.success-alert{background:#eaeaea;color:#04a600; }.checkbox input[type=checkbox],.checkbox-inline input[type=checkbox],.radio input[type=radio],.radio-inline input[type=radio]{float:left;line-height:normal}.ccpa-contact-form .checkbox-inline{margin:5px!important}.checkbox-inline,.radio-inline{font-weight:400;line-height:19px;display:inline-block;height:19px;cursor:pointer;vertical-align:middle}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.control-error{border:solid 1px red !important;}.ccpa-content-text a{color: inherit;}.alert-danger{color: #ff5757;font-size: 12px;}.font-red{color: #ff5757 !important;}.ccpa-content-text,.ccpa-content-text table td{font-size: 14px;line-height: 24px;}.form-control{font-size: 14px;display: block;float: none;background: #fff;width: 100%;height: 38px;padding: 8px 12px;color: #2b2f33;border: 1px solid #f1f1f1;box-shadow: inset 1px 1px 3px #f6f6f6}.ccpa-contact-form td{padding-bottom: 15px}textarea.form-control{line-height: 1.6em;padding: 8px 12px;min-height: 62px}.ccpa_close{margin: 0 auto;width: 100px;display: inherit;background: transparent;border: none;cursor: pointer;}.contact-address-panel{margin-top: 40px;padding: 14px;background-color: #eaeaea;border-radius: 1px;}.ccpa-contact-form .col-sm-12 {width:100% !important;float: left;position: relative;min-height: 1px;padding-right: 10px;padding-left: 10px;box-sizing: border-box;margin-bottom: 15px;}.col-sm-6{margin-bottom: 15px;}.col-sm-6{width: 50%;float: left;position: relative;min-height: 1px;padding-right: 10px;padding-left: 10px;box-sizing: border-box;}.form-control-drf{background-color: #eaeaea;border-radius: 1px;width: 100%;height: 38px;padding: 8px 12px;font-size: 14px;display: block;float: none;border: solid 1px #dcdbdb;}.ccpa-contact-form .control-label{font-weight: bold;height: 25px;width: 100%;}.ccpa-contact-form{margin: 0px -10px;display: block;overflow: auto;}.pull-left {float: left !important;}.pull-right {float: right !important;}</style><div id="sp-alert-messages-drf" style="display:none;" ><span> </span></div><div><div id="-drf"><div id="data-req-form-container" style="display: block;"><div class="tabs-content"><div class="sp-heading-panel " id="sp-popup-heading-drf">##header##</div><div class="sp-banner-intro-div"> ##ccpa_intro_div##</div><div class="group-content-text ccpa-content-text"><div class="ccpa-contact-form">##contact_form##</div><div class="contact-address-panel"><div tabindex="0" class="sp-heading-panel"> ##Display_ContactPrivacyofficer##</div><div><table style="width:100%;">',window.ccpa_sp.ccpaPrivacyBanner+='<tr id="ccpa_companyName" style="display:none;"><td colspan="2"><label tabindex="0">##CompanyName##</label></td></tr>',window.ccpa_sp.ccpaPrivacyBanner+='<tr id="ccpa_mailingAddress" style="display:none;"><td colspan="2"><label tabindex="0">##MailingAddress##</label></td></tr>',window.ccpa_sp.ccpaPrivacyBanner+='<tr id="ccpa_phoneNumber" style="display:none;"><td style="width: 80px;"><label tabindex="0">##Display_Phone##</label></td><td> ##Phone_value##</td></tr>',window.ccpa_sp.ccpaPrivacyBanner+='<tr id="ccpa_website" style="display:none;"><td style="width: 80px;"><label tabindex="0"> ##Display_Website## </label></td><td> <a target="_blank" href="##Website_value##"> ##Website_value## </a></td></tr>',window.ccpa_sp.ccpaPrivacyBanner+='<tr id="ccpa_displayEmail" style="display:none;" ><td style="width: 80px;"><label> ##Display_Email## </label></td><td> ##Email_value##</td></tr>',window.ccpa_sp.ccpaPrivacyBanner+='</table></div></div></div></div></div></div><div id="verificationEmailSent" style="display: none;"><div class="ves" style="line-height:35px;text-align: center;margin: 115px 80px 42px 80px;">##verification_email_text##</div></div></div></div>',ccpa_sp.ccpaResponse=null,window.sp.dataReqForm=null,ccpa_sp.prefLang=null,ccpa_sp.validationErrors=!0,ccpa_sp.version=1,ccpa_sp.translations=[],ccpa_sp.ipInformation,ccpa_sp.validateControl=function(a,b,c){if('true'===b&&document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a)){if(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a).classList.remove('control-error'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).style.display='none',document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML='','Checkbox'!==c&&'Radio'!==c&&''===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a).value&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a).classList.add('control-error'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML=ccpa_sp.getDataRequestValueByKeyword('namerequired'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).style.display='block'),'EmailTextBox'===c){var d=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;d.test(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a).value)||(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a).classList.add('control-error'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML=document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML?document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML+'/'+ccpa_sp.getDataRequestValueByKeyword('emailInvalid'):ccpa_sp.getDataRequestValueByKeyword('emailInvalid'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).style.display='block')}'Checkbox'===c&&void 0===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('input[name=\'chk_'+a+'\']:checked').value&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML=ccpa_sp.getDataRequestValueByKeyword('namerequired'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).style.display='block'),'Radio'===c&&void 0===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('input[name=\'radio_'+a+'\']:checked').value&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).innerHTML=ccpa_sp.getDataRequestValueByKeyword('namerequired'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#validator_'+a).style.display='block')}},ccpa_sp.initCCPA=function(a,b,c){var d=ccpa_sp.ccpaPrivacyBanner;a||(a=sp.selctedLanguage.value),ccpa_sp.prefLang=a;var e=JSON.parse(sessionStorage.getItem('translation-'+window.sp.targetDomain));ccpa_sp.translations=e,ccpa_sp.createBanners(d,window.sp.dataReqForm,a,!0,c)},ccpa_sp.getBannerValueByKeyword=function(a){var b=ccpa_sp.translations.Banner.find(function(b){return b.Keyword.toLowerCase()===a.toLowerCase()});return b?b.Text:a},ccpa_sp.getDataRequestValueByKeyword=function(a,b){var c=ccpa_sp.translations.DataRequest.find(function(b){return b.Keyword.toLowerCase()===a.toLowerCase()});return c?c.Text?c.Text:'':b?b:a},ccpa_sp.getCategoryKeyword=function(a){return 11===a?'advertising':12===a?'social_media':13===a?'site_analytics':14===a?'customer_interaction':15===a?'comments':16===a?'audio_video_player':17===a?'essential':19===a?'preferences':'NA'},ccpa_sp.getCategoryTextKeyword=function(a){return 11===a?'Advertising Category Text':12===a?'Social Media Category Text':13===a?'Analytics Category Text':14===a?'Customer Interaction Category Text':15===a?'Comments Category Text':16===a?'Media Player Category Text':17===a?'Essential Category Text':19===a?'cookieBanner':'cookieBanner'},ccpa_sp.getTranslationByKey=function(b,c){var d=ccpa_sp.ccpaResponse.DispaySettings.filter(function(a){return a.key===b&&a.lang===c})[0];return void 0===d?'request_type'===b?'Request Type':b:d.value},ccpa_sp.getOptionTranslation=function(a){return a},ccpa_sp.essentialFormControl=function(a){a.CustomFieldValue=[{cID:1,cT:'NameTextBox',cL:'Your name',cR:!0,cO:'',tTK:'customer_name'},{cID:2,cT:'EmailTextBox',cL:'Your email',cR:!0,cO:'',tTK:'customer_email'},{cID:3,cT:'AddressTextBox',cL:'Address',cR:!1,cO:'',tTK:'customer_address'},{cID:4,cT:'PhoneTextBox',cL:'Phone number',cR:!1,cO:'',tTK:'customer_Phonenumber'},{cID:6,cT:'Checkbox',cL:'Request type',cR:!0,cO:[{k:'Data export'},{k:'Data deletion'},{k:'Other request'}],tTK:'request_type'},{cID:5,cT:'MessageTextArea',cL:'Message',cR:!1,cO:'',tTK:'customer_Message'}]},ccpa_sp.loadDataRequestForm=function(a,b,c,d,e){var f=sp.prepareHttp('api/datarequest/visitor?ApiKey='+window.securePrivacy.apiKey+'&Domain='+window.sp.targetDomain+'&ComplianceLawType='+window.sp.complianceLawType);f.onload=function(){if(200<=this.status&&400>this.status){var b=JSON.parse(this.response);window.sp.dataReqForm=b,b.IsActive&&null!==document.querySelector('#ifrmPrivacyBanner')?(window.sp.enabledLinks.dataRequest=!0,document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelectorAll('[data-tab=\'data-req-form\']').forEach(a=>{a.style.display='flex'})):null!==document.querySelector('#ifrmPrivacyBanner')&&(window.sp.enabledLinks.dataRequest=!1,document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelectorAll('[data-tab=\'data-req-form\']').forEach(a=>{a.style.display='none'})),ccpa_sp.createBanners(a,window.sp.dataReqForm,c,d,e)}},f.send()},ccpa_sp.createBanners=function(a,b,c,d,e){if(!b)return void ccpa_sp.loadDataRequestForm(a,b,c,d,e);var f=JSON.parse(JSON.stringify(b));if(!f.CcpaHeaderText||0>f.CcpaHeaderText.length)return void console.log('No translation exists for given ccpa forms');try{var g=[];emailAdd=JSON.parse(f.AllEmailAddress);for(var h=0;h<emailAdd.length;h++)g.push(emailAdd[h].address);emailAdd=g.join(',')}catch(a){emailAdd=''}f.CcpaIntroText=JSON.parse(f.CcpaIntroText).filter(function(a){return a.lang===c}),f.CcpaHeaderText=JSON.parse(f.CcpaHeaderText).filter(function(a){return a.lang===c}),f.CcpaHeaderTextKeys&&0!==f.CcpaHeaderTextKeys.length||(f.CcpaIntroText='object'==typeof f.CcpaIntroText?f.CcpaIntroText:JSON.parse(f.CcpaIntroText),f.CcpaHeaderText='object'==typeof f.CcpaHeaderText?f.CcpaHeaderText:JSON.parse(f.CcpaHeaderText),f.DispaySettings='object'==typeof f.DispaySettings?f.DispaySettings:JSON.parse(f.DispaySettings),f.CcpaHeaderTextKeys=f.CcpaHeaderText.map(a=>a.key),f.CcpaIntroTextKey=f.CcpaIntroText.map(a=>a.key),f.DispaySettingsKeys=f.DispaySettings.map(a=>a.key),!f.CcpaIntroTextKey[0]&&(f.CcpaIntroTextKey[0]='IntroText'));let j=f.CcpaHeaderTextKeys.filter(a=>'HeaderText'===a).length;1>j&&(f.CcpaHeaderTextKeys.push('HeaderText'),f.CcpaHeaderTextKeys.push('HeaderTextCCPA'));try{f.CustomFieldValue=JSON.parse(f.CustomFieldValue),0<f.CustomFieldValue.length?ccpa_sp.version=2:(ccpa_sp.version=1,ccpa_sp.essentialFormControl(f))}catch(a){ccpa_sp.essentialFormControl(f)}ccpa_sp.ccpaResponse=f;for(var k='',h=0;h<f.CustomFieldValue.length;h++){var l=f.CustomFieldValue[h],m='col-sm-6',n='38px';if(('MessageTextArea'===l.cT||'TextArea'===l.cT)&&(m='col-sm-12',n='56px'),k+='<div class="'+m+'"><div class="control-label"><div class="pull-left "><label tabindex="0" for='+l.cID+'>'+ccpa_sp.getDataRequestValueByKeyword(l.tTK),l.cR&&(k+='<span class="font-red">*</span>'),k+='</div><div class="pull-right alert alert-danger"  style="display:none;" id="validator_'+l.cID+'"></div></div><div style="min-height: '+n+';">',('NameTextBox'===l.cT||'InputTextBox'===l.cT||'EmailTextBox'===l.cT||'PhoneTextBox'===l.cT||'AddressTextBox'===l.cT)&&(k+='<input tabindex="0" name='+l.cID+' id="ctrl_'+l.cID+'" onblur="window.parent.ccpa_sp.validateControl(\''+l.cID+'\', \''+l.cR+'\', \''+l.cT+'\');" class="form-control-drf" type="text">'),('MessageTextArea'===l.cT||'TextArea'===l.cT)&&(k+='<textarea tabindex="0" name='+l.cID+' rows="3" id="ctrl_'+l.cID+'" onblur="window.parent.ccpa_sp.validateControl(\''+l.cID+'\', \''+l.cR+'\', \''+l.cT+'\');" class="form-control-drf"></textarea>'),'Checkbox'===l.cT)for(var o,b=0;b<l.cO.length;b++)o=l.cO[b].k.toLowerCase().replace(/\s/g,'_'),k+='<label for=chk_'+l.cID+' class="checkbox-inline pull-left">',k+='<input tabindex="0"  type="checkbox" onclick="window.parent.ccpa_sp.validateControl(\''+l.cID+'\', \''+l.cR+'\', \''+l.cT+'\');" name="chk_'+l.cID+'" value="'+ccpa_sp.getDataRequestValueByKeyword(o,l.cO[b].k)+'"> '+ccpa_sp.getDataRequestValueByKeyword(o,l.cO[b].k)+' </label>';if('Radio'===l.cT)for(var o,b=0;b<l.cO.length;b++)o=l.cO[b].k.toLowerCase().replace(/\s/g,'_'),k+='<label for=chk_'+l.cID+' class="radio-inline pull-left">',k+='<input tabindex="0"  type="radio" onclick="window.parent.ccpa_sp.validateControl(\''+l.cID+'\', \''+l.cR+'\', \''+l.cT+'\');" name="radio_'+l.cID+'"  value="'+ccpa_sp.getDataRequestValueByKeyword(o,l.cO[b].k)+'"> '+ccpa_sp.getDataRequestValueByKeyword(o,l.cO[b].k)+' </label>';k+='</div></div>'}var p='HeaderText';'CCPA'===sp.complianceLawType&&(p='HeaderTextCCPA');var q=f.CcpaHeaderTextKeys.filter(function(a){return a===p});a=a.sp_replaceAll('##contact_form##',k),a=a.sp_replaceAll('##Display_Phone##',f.PhoneNumber?ccpa_sp.getDataRequestValueByKeyword('Phone'):''),a=a.sp_replaceAll('##Display_Website##',f.ContactPageAddress?ccpa_sp.getDataRequestValueByKeyword('Website'):''),a=a.sp_replaceAll('##Display_Email##',emailAdd?ccpa_sp.getDataRequestValueByKeyword('Email'):''),a=a.sp_replaceAll('##Display_ContactPrivacyofficer##',ccpa_sp.getDataRequestValueByKeyword('Contact our privacy officer')),a=a.sp_replaceAll('##ccpa_save_btn##',ccpa_sp.getDataRequestValueByKeyword('Submit')),a=a.sp_replaceAll('##ccpa_cancel_button##',ccpa_sp.getDataRequestValueByKeyword('Cancel')),a=a.sp_replaceAll('##back_button_text##',ccpa_sp.getDataRequestValueByKeyword('Back')),a=a.sp_replaceAll('##thank_you_text##',ccpa_sp.getDataRequestValueByKeyword('thankyou')),a=a.sp_replaceAll('##verification_email_text##',ccpa_sp.getDataRequestValueByKeyword('verification_email')),document.querySelector('#ifrmPrivacyBanner')&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-data-request-consent').innerHTML=ccpa_sp.getDataRequestValueByKeyword('Submit')),sp.widgetDisplaySettings.Logo&&0<sp.widgetDisplaySettings.Logo.length?(a=a.sp_replaceAll('##logo_src##',sp.widgetDisplaySettings.Logo),a=a.sp_replaceAll('##logo_href##','')):(a=a.sp_replaceAll('##logo_href##','href=\'https://secureprivacy.ai\''),a='black'===sp.displayOptions.logoColor?a.sp_replaceAll('##logo_src##',sp.apiLink+'assets/images/logo-black.png'):a.sp_replaceAll('##logo_src##',sp.apiLink+'assets/images/logo-small.png'));var s='';sp.displayOptions.hidePoweredByText?a=a.sp_replaceAll('##poweredby##',''):(s='<div class="powered-by"><span class="secure-privacy-logo-top"><a target="_blank" href="https://secureprivacy.ai">Powered by Secureprivacy</a></span></div>',a=a.sp_replaceAll('##poweredby##',s)),0<q.length&&(a=a.sp_replaceAll('##header##',ccpa_sp.getDataRequestValueByKeyword(q[0])),a=a.sp_replaceAll('##ccpa_intro_div##',0<f.CcpaIntroTextKey.length&&null!=f.CcpaIntroTextKey[0]?ccpa_sp.getDataRequestValueByKeyword(f.CcpaIntroTextKey[0]):''),a=a.sp_replaceAll('##CompanyName##',f.CompanyName?f.CompanyName:''),a=a.sp_replaceAll('##MailingAddress##',f.MailingAddress?f.MailingAddress:''),a=a.sp_replaceAll('##Phone_value##',f.PhoneNumber?f.PhoneNumber:''),a=a.sp_replaceAll('##Website_value##',f.ContactPageAddress?f.ContactPageAddress:''),a=a.sp_replaceAll('##Email_value##',emailAdd?emailAdd:''),a=a.sp_replaceAll('##bg_color##',sp.widgetDisplaySettings.BackgroundColor),a=a.sp_replaceAll('##font_color##',sp.widgetDisplaySettings.FontColor),a=a.sp_replaceAll('##cancel_btn_color##',sp.widgetDisplaySettings.SaveButtonColor),a=a.sp_replaceAll('##save_btn_color##',sp.widgetDisplaySettings.CancelButtonColor),document.querySelector('#ifrmPrivacyBanner')&&(!d&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('.sp-data-req-form a').innerHTML=q[0].value),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp_ccpaContainer_CCPA').innerHTML=a,f.CompanyName&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ccpa_companyName').style.display='block'),f.MailingAddress&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ccpa_mailingAddress').style.display='block'),f.PhoneNumber&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ccpa_phoneNumber').style.display='block'),f.ContactPageAddress&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ccpa_website').style.display='block'),f.emailAdd&&(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ccpa_displayEmail').style.display='block')),d&&document.querySelector('#sp_ccpaContainer_CCPA')&&document.querySelector('#sp_ccpaContainer_CCPA').remove())},ccpa_sp.checkFormErrors=function(){ccpa_sp.validationErrors=!1;for(var a,b=0;b<ccpa_sp.ccpaResponse.CustomFieldValue.length;b++)if(a=ccpa_sp.ccpaResponse.CustomFieldValue[b],!0===a.cR){if(ccpa_sp.validateControl(a.cID.toString(),a.cR.toString(),a.cT.toString()),'Checkbox'!==a.cT&&'Radio'!==a.cT&&''===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a.cID).value){ccpa_sp.validationErrors=!0;break}if('EmailTextBox'===a.cT){var c=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!c.test(document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#ctrl_'+a.cID).value)){ccpa_sp.validationErrors=!0;break}}if('Checkbox'===a.cT&&void 0===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('input[name=\'chk_'+a.cID+'\']:checked').value){ccpa_sp.validationErrors=!0;break}if('Radio'===a.cT&&void 0===document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('input[name=\'radio_'+a.cID+'\']:checked').value){ccpa_sp.validationErrors=!0;break}}return ccpa_sp.validationErrors},ccpa_sp.goBackToPrivacyCenter=function(a){var b=document.querySelector('#ifrmPrivacyBanner').contentWindow.document;if(b.querySelector('#tab4').setAttribute('checked','checked'),'block'===b.querySelector('#verificationEmailSent').style.display)ccpa_sp.dismissMessage();else if('block'===b.querySelector('#thankyouSent').style.display)ccpa_sp.dismissMessage();else if(document.getElementById('sp_ccpaContainer_CCPA').style.display='none',document.getElementById('main-privacy-banner').style.display='block',a){var c=document.querySelector('#main-privacy-banner #ifrmPrivacyBanner').contentWindow.document.querySelector('[data-tab]');c.forEach(a=>{a.style.display='none',a.querySelector('a').classList.remove('btn-primary')}),document.querySelector('#main-privacy-banner #ifrmPrivacyBanner').contentWindow.document.querySelector('[data-tab="'+a+'"] a').classList.add('btn-primary'),document.querySelector('#main-privacy-banner #ifrmPrivacyBanner').contentWindow.document.querySelector('#tab-'+a).style.display='block'}},ccpa_sp.requestRemoval=function(){var a=sp.prepareHttp('api/devicefingerprint?DeviceId='+Math.random());a.onload=function(){if(200<=this.status&&400>this.status){var a=JSON.parse(this.response);ccpa_sp.ipInformation=a;var b='';try{var c=JSON.parse(window.sp.dataReqForm.CustomSettings);b=''===c[0].address?JSON.parse(window.sp.dataReqForm.AllEmailAddress)[0].address:c[0].address}catch(a){console.log('Secure Privacy Error : Send to address was not found ')}''===b?ccpa_sp.showAlert('error','Error : Recipient email address was not found.'):ccpa_sp.checkFormErrors()?ccpa_sp.showAlert('error','Please enter required fields'):window.sp.dataReqForm.DoubleVerifyEmail?((!c[0].VerificationEmailTemplate||1>c[0].VerificationEmailTemplate.length)&&(c[0].VerificationEmailTemplate='<p> Hi ##userName##</p><p><br></p><p>We received your request for removal. Please click <a href=\'https://app.secureprivacy.ai/secureprivacy-plugin/web-plugin/ccpa/ccpa-verification.html?name=##customer_name##&email=##customer_email##&address=##customer_address##&phone=##customer_Phonenumber##&message=##customer_Message##&apikey=##apikey##&domain=##domain##&compliance=##compliance##\'>here</a> to verify your email.</p><p><br></p><p><br></p><p>Thank you,</p><p>##CompanyName##</p><p>##MailingAddress##</p><p>##PhoneNumber##</p><p>##Website##</p><p>##CompanyEmail##</p>'),(!c[0].VerificationEmailSubject||1>c[0].VerificationEmailSubject.length)&&(c[0].VerificationEmailSubject='Verify your email'),ccpa_sp.doubleVerifyEmailV2(c[0],b)):((!c[0].CustomerEmailTemplate||1>c[0].CustomerEmailTemplate.length)&&(c[0].CustomerEmailTemplate='<h4>Hi ##CompanyName##,</h4><p><br></p><p>A person has requested removal. The details of that person are</p><p><br></p><p>Name: ##customer_name##</p><p>Email: ##customer_email##</p><p>Address: ##customer_address##</p><p>Phone: ##customer_Phonenumber##</p><p>Request type: ##request_type##</p><p>Message: ##customer_Message##</p><p><br></p><p>Thank you,</p><p>Secure Privacy Team</p>'),(!c[0].CustomerEmailSubject||1>c[0].CustomerEmailSubject.length)&&(c[0].CustomerEmailSubject='Request for removal'),ccpa_sp.requestRemovalEmailV2(c[0],b))}},a.send()},ccpa_sp.showAlert=function(a,b,c){c===void 0&&(c=!1),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-alert-messages-drf span').innerHTML=b,'error'===a?document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-alert-messages-drf').classList.add('error-alert'):document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-alert-messages-drf').classList.add('success-alert'),document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-alert-messages-drf').style.display='block',window.setTimeout(function(){document.querySelector('#ifrmPrivacyBanner').contentWindow.document.querySelector('#sp-alert-messages-drf').style.display='none',c&&(ccpa_sp.hideBanner(),window.parent.sp.hidePrivacyBanner())},5e3)},ccpa_sp.clearForm=function(){for(var a,b=document.querySelector('#ifrmPrivacyBanner').contentWindow.document,c=0;c<ccpa_sp.ccpaResponse.CustomFieldValue.length;c++)a=ccpa_sp.ccpaResponse.CustomFieldValue[c],b.querySelector('#ctrl_'+a.cID)&&(b.querySelector('#ctrl_'+a.cID).value='',b.querySelector('#validator_'+a.cID).style.display='none'),'Checkbox'===a.cT&&b.querySelectorAll('input[name=\'chk_'+a.cID+'\']:checked').forEach(function(a){a.setAttribute('checked',!1)}),'Radio'===a.cT&&b.querySelectorAll('input[name=\'radio_'+a.cID+'\']:checked').forEach(function(a){a.setAttribute('checked',!1)})},ccpa_sp.doubleVerifyEmailV2=function(a,b){var c=document.querySelector('#ifrmPrivacyBanner').contentWindow.document,d=document.querySelector('#ifrmPrivacyBanner').contentWindow,e=a.VerificationEmailTemplate.sp_replaceAll('##CompanyName##',ccpa_sp.ccpaResponse.CompanyName);e=e.sp_replaceAll('##customer_name##',c.querySelector('#ctrl_1').value),e=e.sp_replaceAll('##customer_email##',c.querySelector('#ctrl_2').value),e=e.sp_replaceAll('##customer_address##',c.querySelector('#ctrl_3').value),e=e.sp_replaceAll('##customer_Phonenumber##',c.querySelector('#ctrl_4').value),e=e.sp_replaceAll('##customer_Message##',c.querySelector('#ctrl_5').value),e=e.sp_replaceAll('##CompanyName##',ccpa_sp.ccpaResponse.CompanyName),e=e.sp_replaceAll('##userName##',c.querySelector('#ctrl_1').value),e=e.sp_replaceAll('##MailingAddress##',ccpa_sp.ccpaResponse.MailingAddress),e=e.sp_replaceAll('##PhoneNumber##',ccpa_sp.ccpaResponse.PhoneNumber),e=e.sp_replaceAll('##Website##',ccpa_sp.ccpaResponse.ContactPageAddress),e=e.sp_replaceAll('##CompanyEmail##',b),e=e.sp_replaceAll('##compliance##',ccpa_sp.ccpaResponse.ComplianceLawType),e=e.sp_replaceAll('##apikey##',window.securePrivacy.apiKey);for(var f={},g=0;g<ccpa_sp.ccpaResponse.CustomFieldValue.length;g++){var h=ccpa_sp.ccpaResponse.CustomFieldValue[g],j='',k=[];'Checkbox'===h.cT?(c.querySelectorAll('input[name=\'chk_'+h.cID+'\']:checked').forEach(function(a){k.push(a.value)}),j=k.join(', ')):'Radio'===h.cT?j=c.querySelector('input[name=\'radio_'+h.cID+'\']:checked').value:j=c.querySelector('#ctrl_'+h.cID).value;var l='##'+h.tTK+'##';e=e.sp_replaceAll(l,j),5<h.cID&&(f[h.tTK]=j)}f.CompanyName=ccpa_sp.ccpaResponse.CompanyName,f.userName=c.querySelector('#ctrl_1').value,f.MailingAddress=ccpa_sp.ccpaResponse.MailingAddress,f.PhoneNumber=ccpa_sp.ccpaResponse.PhoneNumber,f.Website=ccpa_sp.ccpaResponse.ContactPageAddress,f.CompanyEmail=b;var m=Object.keys(f).map(function(a){return a+'='+f[a]}).join('&');m=window.sp.targetDomain+'&'+m,e=e.sp_replaceAll('##domain##',m),''!==sp.visitorRegion&&(e=e+'<br/> <br/> <br/> <small> This request was generated from '+ccpa_sp.ipInformation.IP+', '+ccpa_sp.ipInformation.Country+', '+window.parent.location.href+' </small>');var n={To:d.document.querySelector('#ctrl_2').value,Subject:a.VerificationEmailSubject,Body:e},o=new XMLHttpRequest;o.open('POST',sp.apiLink+'api/email',!0),o.setRequestHeader('Content-Type','application/json; charset=UTF-8'),o.onload=function(){if(200<=this.status&&400>this.status){var a=ccpa_sp.getDataRequestValueByKeyword('verification_email');a=a.sp_replaceAll('##customer_email##',d.document.querySelector('#ctrl_2').value),ccpa_sp.clearForm(),ccpa_sp.showAlert('success',a,!0)}},o.send(JSON.stringify(n))},ccpa_sp.requestRemovalEmailV2=function(a,b){var c=document.querySelector('#ifrmPrivacyBanner').contentWindow.document,d=a.CustomerEmailTemplate.sp_replaceAll('##CompanyName##',ccpa_sp.ccpaResponse.CompanyName);d=d.sp_replaceAll('##customer_name##',c.querySelector('#ctrl_1').value),d=d.sp_replaceAll('##customer_email##',c.querySelector('#ctrl_2').value),d=d.sp_replaceAll('##customer_address##',c.querySelector('#ctrl_3').value),d=d.sp_replaceAll('##customer_Phonenumber##',c.querySelector('#ctrl_4').value),d=d.sp_replaceAll('##customer_Message##',c.querySelector('#ctrl_5').value),d=d.sp_replaceAll('##CompanyName##',ccpa_sp.ccpaResponse.CompanyName),d=d.sp_replaceAll('##userName##',c.querySelector('#ctrl_1').value),d=d.sp_replaceAll('##MailingAddress##',ccpa_sp.ccpaResponse.MailingAddress),d=d.sp_replaceAll('##PhoneNumber##',ccpa_sp.ccpaResponse.PhoneNumber),d=d.sp_replaceAll('##Website##',ccpa_sp.ccpaResponse.ContactPageAddress),d=d.sp_replaceAll('##CompanyEmail##',b),d=d.sp_replaceAll('##CompanyEmail##',b);for(var e=0;e<ccpa_sp.ccpaResponse.CustomFieldValue.length;e++){var f=ccpa_sp.ccpaResponse.CustomFieldValue[e],g='',h=[];'Checkbox'===f.cT?(c.querySelectorAll('input[name=\'chk_'+f.cID+'\']:checked').forEach(function(a){h.push(a.value)}),g=h.join(', ')):'Radio'===f.cT?g=c.querySelector('input[name=\'radio_'+f.cID+'\']:checked').value:g=c.querySelector('#ctrl_'+f.cID).value;var j='##'+f.tTK+'##';d=d.sp_replaceAll(j,g)}''!==sp.visitorRegion&&(d=d+'<br/> <br/> <br/> <small> This request was generated from '+ccpa_sp.ipInformation.IP+', '+ccpa_sp.ipInformation.Country+', '+window.parent.location.href+' </small>');var k={To:b,Subject:a.CustomerEmailSubject,Body:d},l=new XMLHttpRequest;l.open('POST',sp.apiLink+'api/email',!0),l.setRequestHeader('Content-Type','application/json; charset=UTF-8'),l.onload=function(){200<=this.status&&400>this.status&&(ccpa_sp.clearForm(),ccpa_sp.showAlert('success',ccpa_sp.getDataRequestValueByKeyword('thankyou'),!0))},l.send(JSON.stringify(k)),xhrEmail.send({To:b,Subject:a.CustomerEmailSubject,Body:d})},ccpa_sp.hideBanner=function(){document.querySelector('#sp_ccpaContainer_CCPA')&&(document.querySelector('#sp_ccpaContainer_CCPA').style.display='none')},ccpa_sp.dismissMessage=function(){var a=document.querySelector('#ifrmPrivacyBanner').contentWindow;a.document.querySelector('#verificationEmailSent').style.display='none',a.document.querySelector('#thankyouSent').style.display='none',a.document.querySelector('#data-req-form-container').style.display='flex',a.document.querySelector('.language-selector').style.visibility='visible',a.document.querySelector('.group-banner-btn').style.visibility='visible',a.document.querySelector('#sp-handle-ccpa-consent').style.visibility='visible'};